<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Training V3 - Agentic AI Crash Course</title>
    <!-- Firebase SDK -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getAuth, signInWithEmailLink, isSignInWithEmailLink, sendSignInLinkToEmail } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
      
      const firebaseConfig = {
        apiKey: "AIzaSyCmy8L5HMTTg9NZG83DCnvkw1nD5zO5NTo",
        authDomain: "custom-training-agentic.firebaseapp.com",
        projectId: "custom-training-agentic",
        storageBucket: "custom-training-agentic.firebasestorage.app",
        messagingSenderId: "629700750047",
        appId: "1:629700750047:web:2063fb4e914d028069976a"
      };
      
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      window.auth = auth;
      window.signInWithEmailLink = signInWithEmailLink;
      window.isSignInWithEmailLink = isSignInWithEmailLink;
      window.sendSignInLinkToEmail = sendSignInLinkToEmail;
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            color: white;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 20px;
        }

        .course-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .stat {
            text-align: center;
            color: white;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .sidebar {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            height: fit-content;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .sidebar h3 {
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .week-nav {
            list-style: none;
        }

        .week-nav li {
            margin-bottom: 12px;
        }

        .week-nav button {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 8px;
            background: #f7fafc;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-weight: 500;
        }

        .week-nav button:hover,
        .week-nav button.active {
            background: #667eea;
            color: white;
            transform: translateX(5px);
        }

        .content-area {
            background: white;
            border-radius: 15px;
            padding: 35px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            min-height: 600px;
        }

        .week-content {
            opacity: 0;
            transform: translateX(30px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: absolute;
            width: 100%;
            pointer-events: none;
        }

        .week-content.active {
            opacity: 1;
            transform: translateX(0);
            position: relative;
            pointer-events: all;
        }

        .week-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .week-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 20px;
        }

        .week-info h2 {
            color: #2d3748;
            margin-bottom: 5px;
        }

        .week-info p {
            color: #718096;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .video-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            border-left: 4px solid #667eea;
        }

        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.1);
        }

        .video-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 10px;
        }

        .video-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .video-duration {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: auto;
        }

        .lab-section {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
        }

        .lab-section h4 {
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .exercises-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .exercise-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .exercise-card:hover {
            transform: translateY(-3px);
        }

        .exercise-number {
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .exercise-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .exercise-description {
            color: #718096;
            font-size: 0.9rem;
        }

        .best-practices {
            background: #fef5e7;
            border-left: 4px solid #ed8936;
            padding: 25px;
            border-radius: 8px;
            margin: 25px 0;
        }

        .best-practices h4 {
            color: #c05621;
            margin-bottom: 15px;
        }

        .best-practices ol {
            color: #744210;
            padding-left: 20px;
        }

        .best-practices li {
            margin-bottom: 8px;
        }

        .progress-bar {
            background: #e2e8f0;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .cta-section {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .cta-button {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(72, 187, 120, 0.3);
        }

        /* Authentication Styles */
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .auth-modal {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .auth-modal h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .auth-modal p {
            color: #718096;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .auth-form {
            margin-bottom: 20px;
        }

        .auth-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s ease;
        }

        .auth-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .auth-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .auth-button:hover {
            transform: translateY(-2px);
        }

        .auth-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .auth-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-size: 14px;
        }

        .auth-message.success {
            background: #f0fff4;
            color: #38a169;
            border: 1px solid #9ae6b4;
        }

        .auth-message.error {
            background: #fed7d7;
            color: #e53e3e;
            border: 1px solid #feb2b2;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .course-stats {
                gap: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Authentication Overlay -->
    <div id="authOverlay" class="auth-overlay">
        <div class="auth-modal">
            <h2>🤖 Access Required</h2>
            <p>Please sign in with your <strong>@you-source.com</strong> email address to access the Agentic AI Crash Course.</p>
            
            <div id="loginForm" class="auth-form">
                <input type="email" id="emailInput" class="auth-input" placeholder="Enter your @you-source.com email" autocomplete="email">
                <button id="loginButton" class="auth-button" onclick="handleEmailLogin()">Send Sign-In Link</button>
            </div>
            
            <div id="verificationForm" class="auth-form hidden">
                <p>📧 Check your email and click the sign-in link to access the course.</p>
                <button class="auth-button" onclick="showLoginForm()">Use Different Email</button>
            </div>
            
            <div id="authMessage" class="auth-message hidden"></div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>🤖 Agentic AI Crash Course</h1>
            <p>Master CrewAI Platform & Build Multi-Agent Applications</p>
            <div class="course-stats">
                <div class="stat">
                    <span class="stat-number">6</span>
                    <span class="stat-label">Weeks</span>
                </div>
                <div class="stat">
                    <span class="stat-number">17</span>
                    <span class="stat-label">Videos</span>
                </div>
                <div class="stat">
                    <span class="stat-number">4</span>
                    <span class="stat-label">Exercises</span>
                </div>
                <div class="stat">
                    <span class="stat-number">Async</span>
                    <span class="stat-label">Format</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <aside class="sidebar">
                <h3>📚 Course Navigation</h3>
                <ul class="week-nav">
                    <li><button onclick="showWeek('overview')" class="active">Course Overview</button></li>
                    <li><button onclick="showWeek('week1')">Week 1: Introduction & Setup</button></li>
                    <li><button onclick="showWeek('week2')">Week 2: Agents & Tasks</button></li>
                    <li><button onclick="showWeek('week3')">Week 3: Tools & RAG</button></li>
                    <li><button onclick="showWeek('week4')">Week 4: Multi-Agent Workflows</button></li>
                    <li><button onclick="showWeek('week5')">Week 5: Autonomy & Guardrails</button></li>
                    <li><button onclick="showWeek('week6')">Week 6: Advanced & Capstone</button></li>
                    <li><button onclick="showWeek('exercises')">Tutorial Exercises</button></li>
                </ul>
            </aside>

            <main class="content-area">
                <div id="overview" class="week-content active">
                    <div class="week-header">
                        <div class="week-number">📋</div>
                        <div class="week-info">
                            <h2>Course Overview</h2>
                            <p>Your journey to mastering agentic AI systems</p>
                        </div>
                    </div>
                    
                    <p><strong>Audience:</strong> Junior-to-mid-level engineers comfortable with Python. Prior ML or LLM experience is not required.</p>
                    
                    <h3 style="margin: 25px 0 15px 0; color: #2d3748;">🎯 Learning Outcomes</h3>
                    <ul style="color: #4a5568; line-height: 1.8; margin-left: 20px;">
                        <li>Design agent personas with clear roles and goals</li>
                        <li>Integrate tools including RAG and external APIs</li>
                        <li>Orchestrate multi-agent workflows</li>
                        <li>Apply guardrails for system reliability</li>
                        <li>Deploy maintainable agent systems</li>
                    </ul>

                    <h3 style="margin: 25px 0 15px 0; color: #2d3748;">🔧 Core Platform Concepts</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 8px;">
                            <strong style="color: #2d3748;">Agents</strong><br>
                            <small style="color: #718096;">Role, goal, backstory, memory</small>
                        </div>
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 8px;">
                            <strong style="color: #2d3748;">Tasks</strong><br>
                            <small style="color: #718096;">Clear description and expected output</small>
                        </div>
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 8px;">
                            <strong style="color: #2d3748;">Crews</strong><br>
                            <small style="color: #718096;">Sequential, parallel, or manager-worker</small>
                        </div>
                        <div style="background: #f0f4f8; padding: 15px; border-radius: 8px;">
                            <strong style="color: #2d3748;">Tools</strong><br>
                            <small style="color: #718096;">Web search, RAG, external APIs</small>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div id="week1" class="week-content">
                    <div class="week-header">
                        <div class="week-number">1</div>
                        <div class="week-info">
                            <h2>Introduction & Setup</h2>
                            <p>Get started with CrewAI and run your first agent</p>
                        </div>
                    </div>

                    <div class="lab-section">
                        <h4>🧪 Core Lab</h4>
                        <p>Run "Hello Agent" example to understand basic agent creation and execution</p>
                    </div>

                    <h3 style="color: #2d3748; margin: 25px 0 15px 0;">📹 Video Content</h3>
                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">3m</div>
                            </div>
                            <div class="video-title">Introduction</div>
                            <p style="color: #718096; font-size: 0.9rem;">Welcome to the course and overview of what you'll learn</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">11m</div>
                            </div>
                            <div class="video-title">Course Overview</div>
                            <p style="color: #718096; font-size: 0.9rem;">Detailed walkthrough of the curriculum and expectations</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">8m</div>
                            </div>
                            <div class="video-title">AI Agents</div>
                            <p style="color: #718096; font-size: 0.9rem;">Understanding the fundamentals of AI agents vs traditional approaches</p>
                        </div>
                    </div>
                </div>

                <div id="week2" class="week-content">
                    <div class="week-header">
                        <div class="week-number">2</div>
                        <div class="week-info">
                            <h2>Agents & Tasks</h2>
                            <p>Deep dive into agent design and task creation</p>
                        </div>
                    </div>

                    <div class="lab-section">
                        <h4>🧪 Core Lab</h4>
                        <p>Implement Exercise 1: Local Task Crew (Daily journal generator with Planner → Writer → Formatter)</p>
                    </div>

                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">15m</div>
                            </div>
                            <div class="video-title">Create Agents to Research & Write an Article</div>
                            <p style="color: #718096; font-size: 0.9rem;"><strong>Code Demo:</strong> Hands-on agent creation walkthrough</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">11m</div>
                            </div>
                            <div class="video-title">Key Elements of AI Agents</div>
                            <p style="color: #718096; font-size: 0.9rem;">Understanding agent components and design principles</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">3m</div>
                            </div>
                            <div class="video-title">Mental Framework for Agent Creation</div>
                            <p style="color: #718096; font-size: 0.9rem;">Thinking patterns for effective agent design</p>
                        </div>
                    </div>
                </div>

                <div id="week3" class="week-content">
                    <div class="week-header">
                        <div class="week-number">3</div>
                        <div class="week-info">
                            <h2>Tools & RAG</h2>
                            <p>Integrate external tools and retrieval-augmented generation</p>
                        </div>
                    </div>

                    <div class="lab-section">
                        <h4>🧪 Core Lab</h4>
                        <p>Implement Exercise 2: Web-Browsing Crew (Tech-news summariser using web tools)</p>
                    </div>

                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">18m</div>
                            </div>
                            <div class="video-title">Multi-Agent Customer-Support Automation</div>
                            <p style="color: #718096; font-size: 0.9rem;"><strong>Code Demo:</strong> Building customer support workflows</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">7m</div>
                            </div>
                            <div class="video-title">Key Elements of Agent Tools</div>
                            <p style="color: #718096; font-size: 0.9rem;">Understanding tool integration and design patterns</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">16m</div>
                            </div>
                            <div class="video-title">Tools for Customer-Outreach Campaign</div>
                            <p style="color: #718096; font-size: 0.9rem;"><strong>Code Demo:</strong> Practical tool implementation</p>
                        </div>
                        <div class="video-card">
                            <div class="video-header">
                                <div class="video-duration">1m</div>
                            </div>
                            <div class="video-title">Recap of Tools</div>
                            <p style="color: #718096; font-size: 0.9rem;">Quick summary of key tool concepts</p>
                        </div>
                    </div>
                </div>

                <div id="exercises" class="week-content">
                    <div class="week-header">
                        <div class="week-number">💻</div>
                        <div class="week-info">
                            <h2>Progressive Tutorial Exercises</h2>
                            <p>Hands-on practice with real-world scenarios</p>
                        </div>
                    </div>

                    <div class="exercises-grid">
                        <div class="exercise-card">
                            <div class="exercise-number">1</div>
                            <div class="exercise-title">Local Task Crew</div>
                            <div class="exercise-description">Build a daily journal generator with Planner → Writer → Formatter workflow</div>
                        </div>
                        <div class="exercise-card">
                            <div class="exercise-number">2</div>
                            <div class="exercise-title">Web-Browsing Crew</div>
                            <div class="exercise-description">Create a tech-news summariser using web search tools</div>
                        </div>
                        <div class="exercise-card">
                            <div class="exercise-number">3</div>
                            <div class="exercise-title">Public-API Crew</div>
                            <div class="exercise-description">Build a city weather reporter using Open-Meteo API</div>
                        </div>
                        <div class="exercise-card">
                            <div class="exercise-number">4</div>
                            <div class="exercise-title">Authenticated-API Crew</div>
                            <div class="exercise-description">Create a GitHub issue summariser with personal access token</div>
                        </div>
                    </div>

                    <div class="best-practices">
                        <h4>🎯 Best Practices for Custom API Tools</h4>
                        <ol>
                            <li>Design narrow, descriptive interfaces</li>
                            <li>Use Pydantic schemas for typed arguments</li>
                            <li>Secure authentication via environment variables</li>
                            <li>Implement robust HTTP error handling</li>
                            <li>Add retry / timeout / idempotency logic</li>
                            <li>Cache and respect rate limits</li>
                            <li>Log calls for observability</li>
                            <li>Provide clear documentation and examples</li>
                            <li>Write unit tests with mocked responses</li>
                        </ol>
                    </div>
                </div>

                <!-- Additional week content would follow the same pattern -->
                <div id="week4" class="week-content">
                    <div class="week-header">
                        <div class="week-number">4</div>
                        <div class="week-info">
                            <h2>Multi-Agent Workflows</h2>
                            <p>Orchestrate complex agent collaborations</p>
                        </div>
                    </div>
                    <p style="color: #718096;">Extend Exercise 2 with sequential & parallel flows. Learn advanced task orchestration patterns.</p>
                </div>

                <div id="week5" class="week-content">
                    <div class="week-header">
                        <div class="week-number">5</div>
                        <div class="week-info">
                            <h2>Autonomy & Guardrails</h2>
                            <p>Add reliability and error handling</p>
                        </div>
                    </div>
                    <p style="color: #718096;">Add planning, retries, and collaboration patterns. Introduce Exercise 3 with reliability features.</p>
                </div>

                <div id="week6" class="week-content">
                    <div class="week-header">
                        <div class="week-number">6</div>
                        <div class="week-info">
                            <h2>Advanced Topics & Capstone</h2>
                            <p>Complete your production-ready project</p>
                        </div>
                    </div>
                    <p style="color: #718096;">Complete Exercise 4 and present your capstone project. Learn deployment and maintenance strategies.</p>
                </div>
            </main>
        </div>


    </div>

    <script>
        function showWeek(weekId) {
            // Get current active content
            const currentActive = document.querySelector('.week-content.active');
            
            // If clicking the same section, don't do anything
            if (currentActive && currentActive.id === weekId) return;
            
            // Remove active class from current content with delay
            if (currentActive) {
                currentActive.classList.remove('active');
            }
            
            // Remove active class from all buttons
            document.querySelectorAll('.week-nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Show new content after a short delay for smoother transition
            setTimeout(() => {
                document.getElementById(weekId).classList.add('active');
            }, 50);
            
            // Update progress bar based on week with delay
            const progressMap = {
                'overview': 0,
                'week1': 16,
                'week2': 32,
                'week3': 48,
                'week4': 64,
                'week5': 80,
                'week6': 100,
                'exercises': 50
            };
            
            setTimeout(() => {
                const progressBar = document.querySelector('.progress-fill');
                progressBar.style.width = progressMap[weekId] + '%';
            }, 200);
        }

        // Authentication functions
        function showMessage(message, type) {
            const messageDiv = document.getElementById('authMessage');
            messageDiv.textContent = message;
            messageDiv.className = `auth-message ${type}`;
            messageDiv.classList.remove('hidden');
        }

        function validateEmail(email) {
            return email.endsWith('@you-source.com');
        }

        function showLoginForm() {
            document.getElementById('loginForm').classList.remove('hidden');
            document.getElementById('verificationForm').classList.add('hidden');
            document.getElementById('authMessage').classList.add('hidden');
        }

        function showVerificationForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('verificationForm').classList.remove('hidden');
        }

        async function handleEmailLogin() {
            const email = document.getElementById('emailInput').value.trim();
            const loginButton = document.getElementById('loginButton');
            
            if (!email) {
                showMessage('Please enter your email address.', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showMessage('Please use your @you-source.com email address.', 'error');
                return;
            }
            
            loginButton.disabled = true;
            loginButton.textContent = 'Sending...';
            
            try {
                const actionCodeSettings = {
                    url: window.location.href,
                    handleCodeInApp: true
                };
                
                await window.sendSignInLinkToEmail(window.auth, email, actionCodeSettings);
                localStorage.setItem('emailForSignIn', email);
                showVerificationForm();
                showMessage('Sign-in link sent to your email!', 'success');
            } catch (error) {
                console.error('Error sending email:', error);
                showMessage('Error sending sign-in link. Please try again.', 'error');
            } finally {
                loginButton.disabled = false;
                loginButton.textContent = 'Send Sign-In Link';
            }
        }

        function hideAuthOverlay() {
            document.getElementById('authOverlay').style.display = 'none';
        }

        // Initialize authentication and app
        document.addEventListener('DOMContentLoaded', async function() {
            // Check if user is already authenticated
            window.auth.onAuthStateChanged((user) => {
                if (user && validateEmail(user.email)) {
                    hideAuthOverlay();
                    initializeApp();
                } else if (user) {
                    // User signed in but wrong domain
                    window.auth.signOut();
                    showMessage('Please use your @you-source.com email address.', 'error');
                }
            });
            
            // Handle email link sign-in
            if (window.isSignInWithEmailLink(window.auth, window.location.href)) {
                let email = localStorage.getItem('emailForSignIn');
                if (!email) {
                    email = prompt('Please provide your @you-source.com email address:');
                }
                
                if (email && validateEmail(email)) {
                    try {
                        await window.signInWithEmailLink(window.auth, email, window.location.href);
                        localStorage.removeItem('emailForSignIn');
                    } catch (error) {
                        console.error('Error signing in:', error);
                        showMessage('Error signing in. Please try again.', 'error');
                    }
                } else {
                    showMessage('Please use your @you-source.com email address.', 'error');
                }
            }
        });

        // Initialize app content
        function initializeApp() {
            const progressBar = document.querySelector('.progress-fill');
            progressBar.style.width = '0%';
            
            // Ensure first content is visible on load
            setTimeout(() => {
                document.getElementById('overview').classList.add('active');
            }, 100);
        }

        // Handle Enter key in email input
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && e.target.id === 'emailInput') {
                handleEmailLogin();
            }
        });
    </script>
</body>
</html>